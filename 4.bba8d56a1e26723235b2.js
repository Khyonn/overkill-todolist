(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{U6jk:function(t,o,e){"use strict";e.r(o),e.d(o,"TodoModule",function(){return X});var s=e("ofXK"),n=e("tyNb"),c=e("fXoL"),i=e("l7P3"),r=function(t){return t.DONE="DONE",t.TODO="TODO",t}({});class a{constructor(t="",o=r.TODO,e){this.title=t,this.state=o,this.id=e}static isDone(t){return!!t&&t.state===r.DONE}}class d{static todoListSorter(t,o){return a.isDone(t)!==a.isDone(o)?a.isDone(t)?1:-1:0}static changeTodoToDone(t,o){const e=t.find(t=>!a.isDone(t)&&t.id===o);if(e){const o=Object.assign(Object.assign({},e),{state:r.DONE}),s=[...t,o];return s.splice(t.indexOf(e),1),s}return t}}const b=Object(i.n)("[TodoList] Start loading"),u=Object(i.n)("[TodoList] Data loaded",Object(i.s)()),p=Object(i.n)("[TodoList] Loading failed"),l=Object(i.n)("[TodoList] Start update todo state",Object(i.s)()),O=Object(i.n)("[TodoList] Todo state updated",Object(i.s)()),f=Object(i.n)("[TodoList] Todo state update failed"),h=t=>t,j=Object(i.p)([],Object(i.r)(b,h),Object(i.r)(u,(t,{todos:o})=>[...o].sort(d.todoListSorter)),Object(i.r)(p,h),Object(i.r)(l,h),Object(i.r)(O,(t,{updatedTodo:o})=>a.isDone(o)?d.changeTodoToDone(t,o.id):t.map(t=>t.id===o.id?o:t)),Object(i.r)(f,h)),g="todosFeature",m={todoList:j},T=Object(i.o)(g),D=Object(i.q)(T,t=>[...t.todoList]);var v=e("Wp6s"),w=e("MutI"),y=e("bSwM");const L=function(t){return{"crossed-out":t}};function k(t,o){if(1&t){const t=c.Qb();c.Nb(0),c.Pb(1,"mat-checkbox",1),c.Wb("change",function(o){return c.ic(t),c.ac().onChangeState(o.checked)}),c.Pb(2,"span",2),c.mc(3),c.Ob(),c.Ob(),c.Mb()}if(2&t){const t=c.ac();c.Ab(1),c.dc("checked",t.isDone),c.Ab(1),c.dc("ngClass",c.fc(3,L,t.isDone)),c.Ab(1),c.nc(t.todo.title)}}let P=(()=>{class t{constructor(t){this.store=t}get isDone(){return a.isDone(this.todo)}onChangeState(t){this.store.dispatch(l({todoToUpdate:this.todo,isDone:t}))}}return t.\u0275fac=function(o){return new(o||t)(c.Kb(i.h))},t.\u0275cmp=c.Eb({type:t,selectors:[["app-todo-item"]],inputs:{todo:"todo"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"checked","change"],[1,"todo-title",3,"ngClass"]],template:function(t,o){1&t&&c.lc(0,k,4,5,"ng-container",0),2&t&&c.dc("ngIf",o.todo)},directives:[s.j,y.a,s.h],styles:[".crossed-out[_ngcontent-%COMP%]{text-decoration:line-through}"]}),t})();function C(t,o){if(1&t&&(c.Pb(0,"mat-list-item"),c.Lb(1,"app-todo-item",2),c.Ob()),2&t){const t=o.$implicit;c.Ab(1),c.dc("todo",t),c.Bb("id","todo_"+t.id)}}function I(t,o){if(1&t&&(c.Pb(0,"mat-card"),c.Pb(1,"mat-card-title"),c.mc(2,"Todo list"),c.Ob(),c.Pb(3,"mat-card-content"),c.Pb(4,"mat-list"),c.lc(5,C,2,2,"mat-list-item",1),c.Ob(),c.Ob(),c.Ob()),2&t){const t=c.ac();c.Ab(5),c.dc("ngForOf",t.todos)}}let S=(()=>{class t{constructor(t){this.store=t}ngOnInit(){this.store.select(D).subscribe(t=>this.todos=t)}}return t.\u0275fac=function(o){return new(o||t)(c.Kb(i.h))},t.\u0275cmp=c.Eb({type:t,selectors:[["app-todo-list"]],decls:1,vars:1,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"todo"]],template:function(t,o){1&t&&c.lc(0,I,6,1,"mat-card",0),2&t&&c.dc("ngIf",null==o.todos?null:o.todos.length)},directives:[s.j,v.a,v.d,v.b,w.a,s.i,w.b,P],styles:[""]}),t})(),E=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=c.Eb({type:t,selectors:[["app-todo-page"]],decls:1,vars:0,template:function(t,o){1&t&&c.Lb(0,"app-todo-list")},directives:[S],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center}app-todo-list[_ngcontent-%COMP%]{width:100%}@media (min-width:501px){app-todo-list[_ngcontent-%COMP%]{margin:1em 0;width:500px}}"]}),t})();var M=e("IzEk"),N=e("lJxs");let x=(()=>{class t{constructor(t){this.store=t}resolve(){return this.store.dispatch(b()),this.store.select(D).pipe(Object(M.a)(1),Object(N.a)(()=>!0))}}return t.\u0275fac=function(o){return new(o||t)(c.Tb(i.h))},t.\u0275prov=c.Gb({token:t,factory:t.\u0275fac}),t})();const F=[{path:"",component:E,resolve:{todos:x}}];let $=(()=>{class t{}return t.\u0275mod=c.Ib({type:t}),t.\u0275inj=c.Hb({factory:function(o){return new(o||t)},imports:[[n.g.forChild(F)],n.g]}),t})();var A=e("PCNd"),_=e("9jGm"),G=e("LRne"),J=e("5+tZ"),K=e("JIr8"),U=e("tk/3");let H=(()=>{class t{constructor(t){this.http=t}getTodos(){return this.http.get("assets/mocks/todos.json")}updateTodo(t){return Object(G.a)(Object.assign({},t))}}return t.\u0275fac=function(o){return new(o||t)(c.Tb(U.a))},t.\u0275prov=c.Gb({token:t,factory:t.\u0275fac}),t})(),W=(()=>{class t{constructor(t,o){this.action$=t,this.todoService=o,this.setTodoList$=Object(_.c)(()=>this.action$.pipe(Object(_.d)(b),Object(J.a)(()=>this.todoService.getTodos().pipe(Object(N.a)(t=>u({todos:t})),Object(K.a)(()=>Object(G.a)(p())))))),this.updateTodo$=Object(_.c)(()=>this.action$.pipe(Object(_.d)(l),Object(J.a)(({todoToUpdate:t,isDone:o})=>this.todoService.updateTodo(Object.assign(Object.assign({},t),{state:o?r.DONE:r.TODO})).pipe(Object(N.a)(t=>O({updatedTodo:t})),Object(K.a)(()=>Object(G.a)(f()))))))}}return t.\u0275fac=function(o){return new(o||t)(c.Tb(_.a),c.Tb(H))},t.\u0275prov=c.Gb({token:t,factory:t.\u0275fac}),t})(),X=(()=>{class t{}return t.\u0275mod=c.Ib({type:t}),t.\u0275inj=c.Hb({factory:function(o){return new(o||t)},providers:[H,x],imports:[[s.b,$,A.a,i.j.forFeature(g,m),_.b.forFeature([W])]]}),t})()}}]);